version: 0.2.0 # Config file version

service: flowise
name: Flowise
description: Visual programming tool for building AI workflows

compose_file: docker-compose.yaml
service_group: apps

volumes:
  - flowise/config
  - flowise/uploads

provides:
  flowise: flowise # Name of the container

depends_on:
  postgres:
    condition: service_healthy

app_version_cmd: [
  'sh',
  '-c',
  "flowise --version | grep -o \"flowise/[0-9]\\+\\.[0-9]\\+\\.[0-9]\\+\" | cut -d'/' -f2",
]

exposes:
  host:
    dashboard:
      url: 'http://localhost:3001'
      credentials:
        username: ${FLOWISE_USERNAME}
        password: ${FLOWISE_PASSWORD}
  internal: # Internal to the stack, not exposed to the host
    api:
      url: http://n8n:5678/api/v1/
      API Key: ${FLOWISE_API_KEY}
